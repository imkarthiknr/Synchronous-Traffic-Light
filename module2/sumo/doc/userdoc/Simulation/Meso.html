<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <!-- Facebook OpenGraph -->
        <meta property="og:image" content="../images/image-facebook.jpg">
        <meta property="og:image:type" content="image/jpeg">
        <meta property="og:image:width" content="1080">
        <meta property="og:image:height" content="1080">

        
        
        <link rel="canonical" href="https://sumo.dlr.de/docs/Simulation/Meso.html">
        <link rel="shortcut icon" href="../favicon.ico">
        
        <title>Simulation/Meso - SUMO Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="apple-touch-icon" href="../images/apple-touch-icon.png">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <link href="../extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body style="background:#f6f6f6;">

        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary text-center">
            <div class="container-fluid">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                </div>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../index.html" class="nav-link">Home</a>
                            </li>
                            <li class="navitem">
                                <a href="../SUMO_User_Documentation.html" class="nav-link">Documentation</a>
                            </li>
                            <li class="navitem">
                                <a href="../Downloads.html" class="nav-link">Downloads</a>
                            </li>
                            <li class="navitem">
                                <a href="../FAQ.html" class="nav-link">FAQ</a>
                            </li>
                            <li class="navitem">
                                <a href="../Contact.html" class="nav-link">Contact</a>
                            </li>
                            <li class="navitem">
                                <a href="../ChangeLog.html" class="nav-link">ChangeLog</a>
                            </li>
                            <li class="navitem">
                                <a href="../Developer/Main.html" class="nav-link">Developer</a>
                            </li>
                            <li class="navitem">
                                <a href="https://github.com/eclipse/sumo/commits/master/docs/web" class="nav-link">Recent Changes</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> <u>S</u>earch
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="edit" href="https://github.com/eclipse/sumo/edit/master/docs/web/docs/Simulation/Meso.md" class="nav-link"><i class="fa fa-github"></i> <u>E</u>dit on GitHub</a>
                            </li>
                      <li class="nav-item dropdown">
                          <a class="nav-link dropdown-toggle" href="#" id="navbardrop" data-toggle="dropdown">
                              <i class="fa fa-chevron-circle-down"></i> More
                          </a>
                          <div class="dropdown-menu dropdown-menu-right">
                            <a class="dropdown-item no-arrow-link" href="https://sumo.dlr.de/sumo_documentation.zip">Download the Documentation</a>
                          </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container-fluid">
            <div class="row">
                    <div class="col-md-3">
                        <div class="text-center"><a href="../index.html" style="display: inline-block; margin-top: 5px;"><img src="../images/sumo-logo.png" class="sumoLogo" alt="SUMO Logo" width="120px"></a></div>
                      
<div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary toc-scroll" style="background-color: #f6f6f6 !important;">
        <ul class="nav flex-column bs-sidenav">
            <p style="margin-top:5px; color:#777777;" class="text-center">Contents</p>
            <li class="nav-item main"><a href="#from_30000_feet">From 30.000 feet</a></li>
            <li class="nav-item main"><a href="#usage_description">Usage Description</a></li>
            <li class="nav-item main"><a href="#model_description">Model Description</a></li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#longitudinal_model" class="nav-link">• Longitudinal Model</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#meso-jam-threshold" class="nav-link">&rarr; meso-jam-threshold</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#further_congestion_effects" class="nav-link">&rarr; Further Congestion Effects</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#jam-resolution" class="nav-link">&rarr; Jam-Resolution</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#lateral_model" class="nav-link">• Lateral Model</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#junction_model" class="nav-link">• Junction Model</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#tls-penalty" class="nav-link">&rarr; TLS-Penalty</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#penalty_at_uncontrolled_intersections" class="nav-link">&rarr; Penalty at uncontrolled intersections</a>
                </li>
                <li class="nav-item" style="text-indent: 25px;">
                    <a href="#impatience" class="nav-link">&rarr; Impatience</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#outputs" class="nav-link">• Outputs</a>
                </li>
                <li class="nav-item" style="text-indent: 5px;">
                    <a href="#limitations_compared_to_sumo" class="nav-link">• Limitations compared to SUMO</a>
                </li>
            <li class="nav-item main"><a href="#meso-gui">MESO-GUI</a></li>
        </ul>
    </div>
</div>
                      </div>
                    <div class="col-md-9" role="main" style="background:white; padding:20px; border-radius:8px; margin-top:5px;">
                        
                            
                            <hTitles>Simulation/Meso<hr style="border: 0.5px solid #338033; margin-top: 5px !important;"></hTitles>
                            
                        

<h1 id="from_30000_feet">From 30.000 feet<a class="headerlink" href="#from_30000_feet" title="Permanent link">#</a></h1>
<p>Starting with version 0.26.0 the mesoscopic model is available in the
<a href="../SUMO.html">SUMO</a> distribution (<a href="Meso.html">MESO</a> has been
developed alongside SUMO since 2002 but was not publicly available).
<a href="Meso.html">MESO</a> refers to a mesoscopic simulation model which
uses the same input data as the main <a href="../SUMO.html">SUMO</a> model. It
computes vehicle movements with queues and runs up to 100 times faster
than the microscopic model of <a href="../SUMO.html">SUMO</a>. Additionally, due
to using a coarser model for intersections and lane-changing it is more
tolerant of network modelling errors than <a href="../SUMO.html">SUMO</a>.</p>
<ul>
<li><strong>Purpose:</strong> Simulates a defined scenario</li>
<li><strong>System:</strong> portable (Linux/Windows is tested); runs on command line</li>
<li><strong>Input (mandatory):</strong><ul>
<li>A) a road network as generated via <a href="../NETCONVERT.html">NETCONVERT</a> or <a href="../NETGENERATE.html">NETGENERATE</a>, see <a href="../SUMO_User_Documentation.html#network_building">Building Networks</a></li>
<li>B) a set of routes (as generated by <a href="../DUAROUTER.html">DUAROUTER</a>, <a href="../JTRROUTER.html">JTRROUTER</a>, <a href="../DFROUTER.html">DFROUTER</a>, or <a href="../ACTIVITYGEN.html">ACTIVITYGEN</a>, see also <a href="../Definition_of_Vehicles,_Vehicle_Types,_and_Routes.html">Definition of Vehicles, Vehicle Types, and Routes</a>)</li>
</ul>
</li>
</ul>
<ul>
<li><strong>Input (optional):</strong> Additional definitions of traffic lights, variable speed signs, output detectors etc.</li>
<li><strong>Output:</strong> SUMO allows to generate a wide set of outputs; visualization is done using <a href="../SUMO-GUI.html">SUMO-GUI</a></li>
<li><strong>Programming Language:</strong> C++</li>
</ul>
<h1 id="usage_description">Usage Description<a class="headerlink" href="#usage_description" title="Permanent link">#</a></h1>
<p>The mesoscopic model uses the same input files and generates (almost)
the same outputs as <a href="../SUMO.html">SUMO</a>. To use
<a href="Meso.html">MESO</a> the option <strong>--mesosim</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;BOOL&gt;</em></a> must be set. Additional options are
described at <a href="../SUMO.html#mesoscopic">SUMO#Mesoscopic</a></p>
<h1 id="model_description">Model Description<a class="headerlink" href="#model_description" title="Permanent link">#</a></h1>
<p>The simulation model is based on the work of <a href="http://kups.ub.uni-koeln.de/1274/">Eissfeldt, Vehicle-based modelling of traffic</a>. The original
model was focused on motorway traffic. The current implementation
contains significant extensions to support the simulation of
heterogeneous urban traffic as well.</p>
<h2 id="longitudinal_model">Longitudinal Model<a class="headerlink" href="#longitudinal_model" title="Permanent link">#</a></h2>
<p>Vehicles are placed in traffic queues with a maximum length specified by
option <strong>--meso-edgelength</strong>. To accomplish this each edge is split into 1 or more queues of
equal length. Generally a queue represents all lanes of an edge but at
intersections with dedicated turning lanes, multiple queues are used.
Vehicles generally leave the queues in the order in which they entered
it. The core idea of the model is to compute the time at which a vehicle
exits the queue according to the following criteria:</p>
<ol>
<li>the traffic state in the current and subsequent queue.</li>
<li>the minimum travel time based on vehicle speed, and speed limit</li>
<li>the state of the intersection for the last queue of an edge
    according to the configuration of the
    <a href="#junction_model">#Junction_Model</a></li>
</ol>
<p>The first point is accomplished by classifying each queue as either
<em>jammed</em> or <em>free</em> according to a traffic density threshold (configured
with option <strong>--meso-jam-threshold</strong>). The minimum headway between vehicles is then computed
differently for each of the four distinct possible cases. The behavior
for each case is configured using the options</p>
<ul>
<li><strong>meso-tauff</strong>: minimum headway when traveling from free segment to
  free segment</li>
<li><strong>meso-taufj</strong>: minimum headway when traveling from free segment to
  jammed segment</li>
<li><strong>meso-taujf</strong>: minimum headway when traveling from jammed segment
  to free segment</li>
<li><strong>meso-taujj</strong>: headway for 'spaces' to travel backwards through the
  jam. When a segment is completely occupied the actual headway is
  VEHICLE_NUMBER * taujj.</li>
</ul>
<p>The headways are scaled according to the inverse of the lane number
(with three lanes, the headways are divided by 3).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The values tauff, taufj and taujf denote net-time gaps (vehicle front bumper to leader back-bumper). The actual gross time gap is computed from this by taking into account the vehicle length.</p>
</div>
<p>The value taujj configures the speed with which the jam front moves
upstream when a multi-segment jam clears.</p>
<p>Backward-moving jams are possible due to the headway effects when
meso-tauff is lower than meso-taujf.</p>
<h3 id="meso-jam-threshold">meso-jam-threshold<a class="headerlink" href="#meso-jam-threshold" title="Permanent link">#</a></h3>
<p>For each queue (also called segment in the GUI) an occupancy threshold
value determines whether that queue is <em>jammed</em> or <em>free</em>. The following
nmerical values are supported for option <strong>--meso-jam-treshold</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;FLOAT&gt;</em></a>:</p>
<ul>
<li>value = -1: Threshold is computed so that vehicles driving at the
  speed limit do not jam. This is the default behavior which is
  recommend for networks with varying speed limits since the free-flow
  occupancy depends on speed.</li>
<li>value &lt; 0: Threshold is computed as above but the free-flow
  occupancy is computed for (speedLimit * -value). As this value
  approaches 0 (from below) jamming is reduced. Values below -1 cause
  increased jamming</li>
<li>value > 0: The value is used directly as the threshold fraction for
  all queues (i.e. 0.4 means that above 40% occupancy the queue is
  jammed)</li>
<li>value = 1: Jamming is disabled</li>
</ul>
<h3 id="further_congestion_effects">Further Congestion Effects<a class="headerlink" href="#further_congestion_effects" title="Permanent link">#</a></h3>
<p>Another mechanism which creates a negative correlation between density
and speed comes through vehicle (preferred)-speed distributions. At
higher traffic densities the probability of being slowed down because a
slow vehicle is ahead in the queue rises. This effect size can be
controlled by <a href="../Definition_of_Vehicles,_Vehicle_Types,_and_Routes.html#speed_distributions">changing the spread of the speed distribution.</a>
On multi-lane edges, <a href="#lateral_model">overtaking can be enabled</a> to reduce this slow-down effect.</p>
<h3 id="jam-resolution">Jam-Resolution<a class="headerlink" href="#jam-resolution" title="Permanent link">#</a></h3>
<p>The option <strong>--meso-recheck</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;TIME&gt;</em></a> can be used to delay traffic flow into a fully occupied segment. Whenever a vehicle cannot move into the next segment because it is full, the given value acts as a time delay before checking again whether the segment has capacity to receive another vehicle. By default this delay is set to 0. </p>
<h2 id="lateral_model">Lateral Model<a class="headerlink" href="#lateral_model" title="Permanent link">#</a></h2>
<p>Lateral movement is not modelled explicitly. Vehicles may overtake each
other (swap their position) if the option <strong>--meso-overtaking</strong> is enabled. This is a
randomized process depending on vehicle speeds and density.</p>
<h2 id="junction_model">Junction Model<a class="headerlink" href="#junction_model" title="Permanent link">#</a></h2>
<p>There are 3 basic options for modelling junction control</p>
<ol>
<li>
<p><strong>--meso-junction-control false</strong> (the default): No junction control takes place. This should only be
    used for motorway scenarios.</p>
</li>
<li>
<p><strong>--meso-junction-control true</strong>: junctions are modeled as in the <a href="Intersections.html#internal_links">simplified microsim model</a> (<strong>--no-internal-links true</strong>).</p>
</li>
<li>
<p><strong>--meso-junction-control.limited true</strong>: No junction control takes place as long as the target queue is in
    the unjammed state (<em>free</em>). When trying to enter a jammed queue,
    junction control as in case 2 is used.</p>
</li>
</ol>
<p>Additional options can be used to control intersection delays:</p>
<h3 id="tls-penalty">TLS-Penalty<a class="headerlink" href="#tls-penalty" title="Permanent link">#</a></h3>
<p>When setting <strong>--meso-tls-penalty</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;FLOAT&gt;</em></a>: to a value > 0 (default is 0), a time penalty is applied
according to the average delay time (based on red phase duration) and
the minimum headway time is increased to model the maximum capacity
(according the the proportion of green time to cycle time). This takes
precedence over any of the above <strong>--meso-junction-control</strong> settings for tls controlled
intersections. FLOAT is used as a scaling factor that roughly
corresponds to coordination (1.0 corresponds to uncoordinated traffic
lights, whereas values approaching 0 model near-perfect coordination).
(The limit case of no-penalty can be achieved by setting <strong>--meso-junction-control false</strong>)</p>
<p>For an option value of <em>p</em>, The time penalty is computed by scaling the
expected waiting time for random arrival within the cycle</p>
<pre><code>travelTimePenalty = p * (redTime * redTime + redTime) / (2 * cycleTime)
</code></pre>

<p>Also, the headway time within the queue is increased to model reduced
capacity. This value is also scaled with p to account for imperfect
knowledge regarding actual green-split:</p>
<pre><code>headway = defaultHeadway * cycleTime / (cycleTime - p * redDuration)
</code></pre>

<h3 id="penalty_at_uncontrolled_intersections">Penalty at uncontrolled intersections<a class="headerlink" href="#penalty_at_uncontrolled_intersections" title="Permanent link">#</a></h3>
<p><strong>--meso-minor-penalty</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;TIME&gt;</em></a> can be used to apply a fixed time penalty when passing an unprioritzed
link (this is disabled when --meso-junction-control.limited is set and
junction control is active for that link)</p>
<h3 id="impatience">Impatience<a class="headerlink" href="#impatience" title="Permanent link">#</a></h3>
<p>Vehicles that reach an <a href="../Definition_of_Vehicles,_Vehicle_Types,_and_Routes.html#impatience">impatience</a> value of 1 (maximum) can pass an intersection regardless of foe traffic with higher priority. The time to reach maximum impatience can be configured with option <strong>--time-to-impatience</strong> <a href="/docs/Basics/Notation.html#referenced_data_types"><em>&lt;TIME&gt;</em></a>. </p>
<h2 id="outputs">Outputs<a class="headerlink" href="#outputs" title="Permanent link">#</a></h2>
<p>Many of the output options of SUMO are supported but the resulting files
differ somewhat:</p>
<ul>
<li>No lane specific output is possible.<ul>
<li><a href="Output/Lane-_or_Edge-based_Traffic_Measures.html#lane-based_network_states">&lt;laneData>-output</a>
  will be treated like <code>&lt;edgeData&gt;</code>-output.</li>
<li><a href="Output/RawDump.html">netstate-dump</a> will
  report vehicles as child elements of <code>&lt;edge&gt;</code> instead of <code>&lt;lane&gt;</code>.</li>
</ul>
</li>
<li>Induction loops write attributes that are similar to meanData output</li>
</ul>
<p>The following outputs are not supported:</p>
<ul>
<li><a href="Output/Lanearea_Detectors_(E2).html">Lane area detectors (E2)</a></li>
<li><a href="Output/Multi-Entry-Exit_Detectors_(E3).html">Multi-Entry-Exit detectors (E3)</a></li>
</ul>
<h2 id="limitations_compared_to_sumo">Limitations compared to SUMO<a class="headerlink" href="#limitations_compared_to_sumo" title="Permanent link">#</a></h2>
<p>The following SUMO features are not supported:</p>
<ul>
<li>TraCI (planned for the future)</li>
<li>Electric model</li>
<li>Wireless model</li>
<li>Opposite-direction driving</li>
<li>Sublane-model</li>
<li>Boarding durations for passengers</li>
</ul>
<h1 id="meso-gui">MESO-GUI<a class="headerlink" href="#meso-gui" title="Permanent link">#</a></h1>
<p>The mesoscopic simulation can be observed with
<a href="../SUMO-GUI.html">SUMO-GUI</a> when running with option <strong>--mesosim</strong>. The
difference between micro- and meso-simulation is not visible from
isolated vehicles. Once there are multiple vehicles waiting in a queue
it becomes more apparent due to differences in spacing between the
vehicles. And from the fact that vehicles appear to <em>jump</em> in 100m
increments (which is the default segment length). When right-clicking on
vehicles or edges and selecting 'Show parameters' the set of values is
different between the microscopic and mesoscopic model. For larger
simulations the speed difference will also be noticable. Due to being
based on edges rather than lanes, some of the visualization options are
different when running the mesoscopic model as well.</p>
                        
                        
                        </div>
            </div>
            
            <button onclick="goTopFunction()" id="goToTop" title="Go to top"><i class="fa fa-arrow-up"></i></button>

        </div>

        <footer class="col-md-12">
          
        <br><small><i>This page was last edited on: 12 September 2019</i></small>
    
            <hr>
                <p>Copyright &copy; 2001 - 2020 German Aerospace Center (DLR) and others.</p>
            <p>Follow us on <a class="no-arrow-link" href="https://www.twitter.com/eclipsesumo/"><i class="fa fa-twitter"></i></a> <a class="no-arrow-link" href="https://www.facebook.com/simulationofurbanmobility/"><i class="fa fa-facebook-square"></i></a>
            | Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    Enter your search terms below.
                </p>
                    <script async src="https://cse.google.com/cse.js?cx=004302551366764109984:1kpgtzrm6kv"></script>
                    <div class="gcse-search"></div>
            </div>
        </div>
    </div>
</div>
      <script>
        window.onscroll = function() {scrollFunction()};
        
        function scrollFunction() {
          if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("goToTop").style.display = "block";
          } else {
            document.getElementById("goToTop").style.display = "none";
          }
        }
    
        function goTopFunction() {
          document.body.scrollTop = 0;
          document.documentElement.scrollTop = 0;
        }
        </script>

        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "search": 83, "edit": 69};
        </script>
        <script src="../js/base.js" defer></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Key</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                  <tr>
                    <td class="edit shortcut"><kbd>e</kbd></td>
                    <td>Edit on GiHub</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>
</html>
